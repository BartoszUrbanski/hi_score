
  // DEPRECATED in favor of modal overlays
  // BEGIN public method /makePopup/
  // INPUT  :
  // arg_map with the following attributes:
  //   REQUIRED
  //   event      : event object, e.g. as returned from a click event
  //   height_px  : height, in pixels, for pop-up window
  //   width_px   : width, in pixels, for pop-up window
  //   s_content  : (required) html string of content
  //
  //   OPTIONAL
  //   title_text     : (default: '') pop-up title
  //   do_scrollbar   : (default: false ) boolean indicating scrollbar
  //   css_lib_list   : (default: []  ary of css libs to include
  //   js_lib_list    : (default: []) ary of javascript libs to include
  //
  // PROCESS:
  //   Presents content in pop-up window
  //
  // RETURNS:
  //   win, the DOM object of the pop-up window
  //
  function makePopup ( arg_map ) {
    var
      event        = arg_map.event,
      height_px    = arg_map.height_px,
      width_px     = arg_map.width_px,
      scroll_text  = arg_map.do_scrollbar === true ? 'yes' : 'no',
      title_text   = arg_map.title_text    || __blank,
      content_html = arg_map.content_html  || __blank,
      css_lib_list = arg_map.css_lib_list  || [],
      js_lib_list  = arg_map.js_lib_list   || [],
      half_num     = configMap.half_num,

      screen_x_int
        = mathFloor(event.screenX - ( width_px * half_num ) + half_num ),
      screen_y_int
        = mathFloor(event.screenY - ( height_px * half_num ) + half_num ),
      win_props_text
        = 'height=' + height_px + ',width=' + width_px
        + ',top=' + __Str(screen_y_int) + ',left=' + __Str(screen_x_int)
        + ',wrap,scrollbars=' + scroll_text + ',resizable=yes',

      css_text = __blank,
      js_text  = __blank,

      win_content
      ;

    if ( stateMap.win_content ) {
      stateMap.win_content.close();
      stateMap.win_content = null;
    }

    // populate css libs
    /*jslint unparam: true*/
    $.each(css_lib_list, function( idx, text) {
      css_text
        += '<link rel="stylesheet" href="'
        + text + '" type="text/css"/>\n'
      ;
    });

    // populate js libs
    $.each(js_lib_list, function( idx, text) {
      js_text += '<script src="' + text+ '"></script>\n';
    });
    /*jslint unparam: false*/

    win_content = window.open(__blank,__blank,win_props_text);

    function populateHtml ( content_html ) {
      win_content.document.write(
        '<html>'
        + '<head>'
        + '<title>' + title_text + '</title>'
        + '<meta http-equiv="X-UA-Compatible" content="IE=8"/>'
        + css_text
        + js_text
        + '<style>'
        + 'body { padding: 12px; }'
        + '</style>'
        + '</head>'
        + '<body>'
        + content_html
        + '<div style="text-align: right">'
        + '<input type="button" value=" Close " onclick="self.close();"/>'
        + '</div>'
        + '</body>'
        + '</html>'
      );
    }

    if ( content_html ) {
      populateHtml( content_html );
    } else {
      arg_map.populate_callback_function( populateHtml );
    }

    if ( ! win_content ) {
      alert(
        'You browser is blocking pop-ups. '
        + 'Please disable blocking to enable this function.'
      );
      return null;
    }

    // close write
    win_content.document.close();

    // focus this window
    win_content.window.focus();

    stateMap.win_content = win_content;

    return win_content;
  }
  // END _makePopup_
  // BEGIN public method /makeUrlPopup/
  // INPUT  :
  // arg_map with the following attributes:
  //   event : (required) event object, e.g. as returned from a click event
  //   height_px  : (required) height, in pixels, for pop-up window
  //   width_px  : (required) width, in pixels, for pop-up window
  //   do_scrollbar : (default: false ) boolean indicating scrollbar
  //   target_url : (required) url of target content
  //
  // PROCESS:
  //   Presents URL in pop-up window
  //
  // RETURNS:
  //   win, the DOM object of the pop-up window
  //
  function makeUrlPopup ( arg_map ) {
    var
      event        = arg_map.event,
      height_px    = arg_map.height_px,
      width_px     = arg_map.width_px,
      scroll_text  = arg_map.do_scrollbar ? 'yes' : 'no',
      target_url   = arg_map.target_url,
      half_num     = configMap.half_num,

      screen_x_int
        = mathFloor(event.screenX - ( width_px * half_num ) + half_num ),
      screen_y_int
        = mathFloor(event.screenY - ( height_px * half_num ) + half_num ),
      win_props_text
         = 'height=' + height_px + ',width=' + width_px
         + ',top=' + __Str(screen_y_int) + ',left=' + __Str(screen_x_int)
         + ',wrap,scrollbars=' + scroll_text + ',resizable=yes',
      win
      ;

    if ( window.top.butil_win_url ) {
      window.top.butil_win_url.close();
      setTimeout( function () {
        win = window.open(target_url,'butil_win_url',win_props_text);
      }, configMap.popup_delay_ms );
    }
    else {
      win = window.open(target_url,'butil_win_url',win_props_text);
      if ( ! win ) { win = window.open(target_url,'_blank'); }
    }
    if ( ! win ) {
      alert(
        'You browser is blocking pop-ups. '
        + 'Please disable blocking to enable this function.'
      );
      return null;
    }
    win.focus();
    return win;
  }
  // END public method /makeUrlPopup/
  // BEGIN public method /openWindow/
  function openWindow ( url_str ) {
    var win = window.open( url_str, '_blank' );
    win.focus();
    return false;
  }
  // END public method /openWindow/



    // DEPRECATED in favor of modal overlays
    _makePopup_      : makePopup,
    _makeUrlPopup_   : makeUrlPopup,
    _openWindow_     : openWindow,

